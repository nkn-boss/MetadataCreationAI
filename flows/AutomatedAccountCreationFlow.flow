<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <processType>Flow</processType>
    <status>Active</status>
    <startElementReference>start</startElementReference>
    <elements>
        <start>
            <connector>
                <targetReference>leadQualifiedDecision</targetReference>
            </connector>
        </start>
        <decision name="leadQualifiedDecision">
            <defaultConnector>
                <targetReference>createAccount</targetReference>
            </defaultConnector>
            <rules>
                <name>LeadQualified</name>
                <conditionLogic>and</conditionLogic>
                <conditions>
                    <leftValueReference>Lead.Status</leftValueReference>
                    <operator>equals</operator>
                    <rightValue>Qualified</rightValue>
                </conditions>
                <connector>
                    <targetReference>createAccount</targetReference>
                </connector>
            </rules>
        </decision>
        <createRecords name="createAccount">
            <object>Account</object>
            <storeOutputAutomatically>true</storeOutputAutomatically>
            <inputAssignments>
                <field>Account.Name</field>
                <value>{!Lead.Company}</value>
            </inputAssignments>
            <inputAssignments>
                <field>Account.Phone</field>
                <value>{!Lead.Phone}</value>
            </inputAssignments>
            <connector>
                <targetReference>createContact</targetReference>
            </connector>
        </createRecords>
        <createRecords name="createContact">
            <object>Contact</object>
            <storeOutputAutomatically>true</storeOutputAutomatically>
            <inputAssignments>
                <field>Contact.LastName</field>
                <value>{!Lead.LastName}</value>
            </inputAssignments>
            <inputAssignments>
                <field>Contact.Email</field>
                <value>{!Lead.Email}</value>
            </inputAssignments>
            <inputAssignments>
                <field>Contact.AccountId</field>
                <value>{!createAccount.Id}</value>
            </inputAssignments>
            <connector>
                <targetReference>sendNotification</targetReference>
            </connector>
        </createRecords>
        <action name="sendNotification">
            <actionType>emailAlert</actionType>
            <actionName>AccountCreationNotification</actionName>
            <inputParameters>
                <name>AccountId</name>
                <value>{!createAccount.Id}</value>
            </inputParameters>
            <connector>
                <targetReference>end</targetReference>
            </connector>
        </action>
        <end/>
    </elements>
    <variables>
        <name>Lead</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <objectType>Lead</objectType>
    </variables>
</Flow>