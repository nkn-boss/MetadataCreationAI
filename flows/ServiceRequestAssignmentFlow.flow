<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <status>Active</status>
    <processType>Flow</processType>
    <variables>
        <name>varRequestId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varAgentId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <recordLookups>
        <name>LookupRequest</name>
        <inputAssignments>
            <field>Id</field>
            <value>{!varRequestId}</value>
        </inputAssignments>
        <outputAssignments>
            <field>Request_Type__c</field>
            <assignToReference>varRequestType</assignToReference>
        </outputAssignments>
        <outputAssignments>
            <field>Priority__c</field>
            <assignToReference>varPriority</assignToReference>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>LookupAgent</name>
        <inputAssignments>
            <field>Agent_Availability__c</field>
            <value>1</value>
        </inputAssignments>
        <outputAssignments>
            <field>Id</field>
            <assignToReference>varAgentId</assignToReference>
        </outputAssignments>
    </recordLookups>
    <recordCreates>
        <name>AssignRequest</name>
        <inputAssignments>
            <field>Request__c</field>
            <value>{!varRequestId}</value>
        </inputAssignments>
        <inputAssignments>
            <field>Agent__c</field>
            <value>{!varAgentId}</value>
        </inputAssignments>
    </recordCreates>
</Flow>